<!-- FontAwesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

{%- assign current_variant = product.selected_or_first_available_variant -%}

<section class="product-section" style="--thumb-active: {{ section.settings.thumbnail_active_color }}">
  <div class="product-container">
    <!-- Left Column - Product Media -->
    <div class="product-gallery">
      <div class="product-main-image">
        {% if product.media.size > 0 %}
          {% assign featured_media = current_variant.featured_media | default: product.featured_media %}
          {% if featured_media.media_type == 'video' %}
            <div class="product-media-video">
              {{ featured_media | media_tag: autoplay: false, controls: true }}
            </div>
          {% elsif featured_media.media_type == 'external_video' %}
            <div class="product-media-video">
              {{ featured_media | external_video_tag: loading: 'lazy' }}
            </div>
          {% elsif featured_media.media_type == 'model' %}
            <div class="product-media-model">
              {{ featured_media | model_viewer_tag }}
            </div>
          {% else %}
            <img
              id="main-product-image"
              src="{{ featured_media | image_url: width: 800 }}"
              alt="{{ featured_media.alt | default: product.title | escape }}"
              width="800"
              height="800"
              loading="eager"
            >
          {% endif %}
        {% else %}
          <div class="product-image-placeholder">
            <i class="fa-regular fa-image" style="font-size: 80px; color: #ccc;"></i>
          </div>
        {% endif %}
      </div>

      {% if product.media.size > 1 %}
        <div class="product-thumbnails-wrapper">
          <button class="thumb-nav thumb-prev" aria-label="Previous thumbnails">
            <i class="fa-solid fa-chevron-left"></i>
          </button>

          <div class="product-thumbnails" id="product-thumbnails">
            {% for media in product.media %}
              <button
                class="product-thumbnail {% if media == featured_media %}active{% endif %}"
                data-media-id="{{ media.id }}"
                data-media-type="{{ media.media_type }}"
                {% if media.media_type == 'image' %}
                  data-image-url="{{ media | image_url: width: 800 }}"
                {% endif %}
                data-index="{{ forloop.index0 }}"
              >
                {% if media.media_type == 'video' or media.media_type == 'external_video' %}
                  <div class="thumb-video-badge">
                    <i class="fa-solid fa-play" style="font-size: 10px;"></i>
                  </div>
                {% elsif media.media_type == 'model' %}
                  <div class="thumb-video-badge">
                    <i class="fa-solid fa-cube" style="font-size: 10px;"></i>
                  </div>
                {% endif %}
                <img
                  src="{{ media.preview_image | image_url: width: 150 }}"
                  alt="{{ media.alt | default: product.title | escape }}"
                  width="80"
                  height="80"
                  loading="lazy"
                >
              </button>
            {% endfor %}
          </div>

          <button class="thumb-nav thumb-next" aria-label="Next thumbnails">
            <i class="fa-solid fa-chevron-right"></i>
          </button>
        </div>
      {% endif %}
    </div>

    <!-- Right Column - Product Info -->
    <div class="product-info">

      {% for block in section.blocks %}
        {% case block.type %}

          {% when 'vendor' %}
            <div class="product-vendor" {{ block.shopify_attributes }}>
              {% if product.vendor != blank %}
                <a href="{{ product.vendor | url_for_vendor }}">{{ product.vendor }}</a>
              {% endif %}
            </div>

          {% when 'title' %}
            <h1 class="product-title" {{ block.shopify_attributes }}>{{ product.title }}</h1>

          {% when 'price' %}
            <div class="product-price-wrapper" id="product-price-wrapper" {{ block.shopify_attributes }}>
              <span class="product-price" id="product-price">{{ current_variant.price | money }}</span>
              <span class="product-compare-price" id="product-compare-price" {% unless current_variant.compare_at_price > current_variant.price %}style="display:none"{% endunless %}>
                {{ current_variant.compare_at_price | money }}
              </span>
              {% if current_variant.compare_at_price > current_variant.price %}
                {% assign savings = current_variant.compare_at_price | minus: current_variant.price %}
                {% assign savings_percent = savings | times: 100.0 | divided_by: current_variant.compare_at_price | round %}
                <span class="product-sale-badge" id="product-sale-badge">Save {{ savings_percent }}%</span>
              {% else %}
                <span class="product-sale-badge" id="product-sale-badge" style="display:none"></span>
              {% endif %}

              {%- if current_variant.unit_price_measurement -%}
                <div class="product-unit-price" id="product-unit-price">
                  <span>{{ current_variant.unit_price | money }}</span>
                  <span>/</span>
                  {%- if current_variant.unit_price_measurement.reference_value != 1 -%}
                    <span>{{ current_variant.unit_price_measurement.reference_value }}</span>
                  {%- endif -%}
                  <span>{{ current_variant.unit_price_measurement.reference_unit }}</span>
                </div>
              {%- else -%}
                <div class="product-unit-price" id="product-unit-price" style="display:none"></div>
              {%- endif -%}

              {% if cart.taxes_included %}
                <p class="product-tax-note">{{ 'product.tax_included' | t }}</p>
              {% endif %}
            </div>

          {% when 'description' %}
            <div class="product-description" {{ block.shopify_attributes }}>
              {{ product.description }}
            </div>

          {% when 'variant_selector' %}
            {%- assign vs_shape_radius = '8px' -%}
            {%- if block.settings.button_shape == 'pill' -%}{%- assign vs_shape_radius = '30px' -%}
            {%- elsif block.settings.button_shape == 'square' -%}{%- assign vs_shape_radius = '0' -%}
            {%- endif -%}
            {%- assign vs_swatch_radius = '50%' -%}
            {%- if block.settings.swatch_shape == 'square' -%}{%- assign vs_swatch_radius = '6px' -%}{%- endif -%}
            <div class="product-variants" {{ block.shopify_attributes }}
              style="
                --vs-btn-radius: {{ vs_shape_radius }};
                --vs-btn-selected-bg: {{ block.settings.button_selected_bg }};
                --vs-btn-selected-text: {{ block.settings.button_selected_text }};
                --vs-swatch-size: {{ block.settings.swatch_size }}px;
                --vs-swatch-radius: {{ vs_swatch_radius }};
              "
            >
              {% unless product.has_only_default_variant %}
                {% for option in product.options_with_values %}
                  <div class="variant-option-group" data-option-index="{{ forloop.index0 }}">
                    <label class="variant-option-label">{{ option.name }}</label>

                    {% if block.settings.picker_style == 'dropdown' %}
                      <select class="variant-option-dropdown" name="option-{{ option.name | handle }}">
                        {% for value in option.values %}
                          <option value="{{ value | escape }}" {% if option.selected_value == value %}selected{% endif %}>
                            {{ value }}
                          </option>
                        {% endfor %}
                      </select>
                    {% else %}
                      <div class="variant-option-values">
                        {% for value in option.values %}
                          {%- assign option_swatch = value.swatch -%}
                          {%- assign show_swatch = false -%}
                          {%- if block.settings.swatch_style == 'variant_image' and option_swatch.image -%}
                            {%- assign show_swatch = true -%}
                          {%- elsif block.settings.swatch_style == 'color' and option_swatch.color -%}
                            {%- assign show_swatch = true -%}
                          {%- elsif block.settings.swatch_style == 'variant_image' and option_swatch.color -%}
                            {%- assign show_swatch = true -%}
                          {%- endif -%}
                          <label class="variant-option-value {% if option.selected_value == value %}selected{% endif %} {% if show_swatch %}is-swatch{% endif %}"
                            data-value="{{ value | escape }}"
                          >
                            <input
                              type="radio"
                              name="option-{{ option.name | handle }}"
                              value="{{ value | escape }}"
                              {% if option.selected_value == value %}checked{% endif %}
                              class="visually-hidden"
                            >
                            {% if show_swatch and option_swatch.image %}
                              <span class="swatch-preview swatch-image" style="background-image: url('{{ option_swatch.image | image_url: width: 50 }}')"></span>
                            {% elsif show_swatch and option_swatch.color %}
                              <span class="swatch-preview swatch-color" style="background-color: {{ option_swatch.color }}"></span>
                            {% else %}
                              <span class="swatch-text">{{ value }}</span>
                            {% endif %}
                          </label>
                        {% endfor %}
                      </div>
                    {% endif %}
                  </div>
                {% endfor %}
              {% endunless %}
            </div>

          {% when 'feature_icon' %}
            <div class="feature-item" {{ block.shopify_attributes }}>
              {% if block.settings.feature_icon != blank %}
                <span class="feature-icon">{{ block.settings.feature_icon }}</span>
              {% endif %}
              <span class="feature-text">{{ block.settings.feature_text }}</span>
            </div>

          {% when 'tabs' %}
            <div class="product-tabs" {{ block.shopify_attributes }} style="--tab-bg: {{ block.settings.tab_background_color }}; --tab-text: {{ block.settings.tab_text_color }}; --tab-active: {{ block.settings.tab_active_color }}; --tab-content-bg: {{ block.settings.content_background_color }}; --tab-content-text: {{ block.settings.content_text_color }};">
              <div class="product-tabs-nav">
                {% if block.settings.show_description %}
                  <button class="tab-btn active" data-tab="description">{{ block.settings.description_label }}</button>
                {% endif %}
                {% if block.settings.show_benefits %}
                  <button class="tab-btn {% unless block.settings.show_description %}active{% endunless %}" data-tab="benefits">{{ block.settings.benefits_label }}</button>
                {% endif %}
                {% if block.settings.show_ingredients %}
                  <button class="tab-btn {% unless block.settings.show_description or block.settings.show_benefits %}active{% endunless %}" data-tab="ingredients">{{ block.settings.ingredients_label }}</button>
                {% endif %}
              </div>

              <div class="product-tabs-content">
                {% if block.settings.show_description %}
                  <div class="tab-content active" id="tab-description">
                    <div class="tab-content-inner">
                      {{ product.description }}
                    </div>
                  </div>
                {% endif %}

                {% if block.settings.show_benefits %}
                  <div class="tab-content {% unless block.settings.show_description %}active{% endunless %}" id="tab-benefits">
                    <div class="tab-content-inner">
                      {% if block.settings.benefits_content != blank %}
                        {{ block.settings.benefits_content }}
                      {% else %}
                        {% assign benefits_meta = product.metafields.custom.benefits.value | default: product.metafields.custom.benefits %}
                        {% if benefits_meta != blank %}
                          {{ benefits_meta }}
                        {% else %}
                          <p class="no-content">No benefits information available.</p>
                        {% endif %}
                      {% endif %}
                    </div>
                  </div>
                {% endif %}

                {% if block.settings.show_ingredients %}
                  <div class="tab-content {% unless block.settings.show_description or block.settings.show_benefits %}active{% endunless %}" id="tab-ingredients">
                    <div class="tab-content-inner">
                      {% if block.settings.ingredients_content != blank %}
                        {{ block.settings.ingredients_content }}
                      {% else %}
                        {% assign ingredients_meta = product.metafields.custom.ingredients.value | default: product.metafields.custom.ingredients %}
                        {% if ingredients_meta != blank %}
                          {{ ingredients_meta }}
                        {% else %}
                          <p class="no-content">No ingredients information available.</p>
                        {% endif %}
                      {% endif %}
                    </div>
                  </div>
                {% endif %}
              </div>
            </div>

          {% when 'quantity' %}
            <div class="product-quantity-wrapper" {{ block.shopify_attributes }} style="--qty-btn-bg: {{ block.settings.button_background }}; --qty-btn-color: {{ block.settings.button_icon_color }}; --qty-btn-hover: {{ block.settings.button_hover_color }}; --qty-text-color: {{ block.settings.text_color }}; --qty-width: {{ block.settings.width_desktop }}%; --qty-width-mobile: {{ block.settings.width_mobile }}%;">
              <label class="quantity-label" for="product-quantity">{{ block.settings.label }}</label>
              <div class="quantity-selector">
                <button class="quantity-btn quantity-minus" aria-label="Decrease quantity" type="button">
                  <i class="fa-solid fa-minus"></i>
                </button>
                <input
                  type="number"
                  class="quantity-input"
                  id="product-quantity"
                  value="1"
                  min="1"
                  max="{{ current_variant.inventory_quantity | default: 99 }}"
                  readonly
                >
                <button class="quantity-btn quantity-plus" aria-label="Increase quantity" type="button">
                  <i class="fa-solid fa-plus"></i>
                </button>
              </div>
            </div>

          {% when 'product_accordion' %}
            <div class="product-accordion" {{ block.shopify_attributes }}>
              {% if block.settings.show_description %}
                <details class="product-accordion__item">
                  <summary class="product-accordion__trigger">
                    <span class="product-accordion__title">{{ block.settings.description_label }}</span>
                    <span class="product-accordion__icon" aria-hidden="true">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path class="product-accordion__icon-h" d="M3 8H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path class="product-accordion__icon-v" d="M8 3V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                      </svg>
                    </span>
                  </summary>
                  <div class="product-accordion__content">
                    <div class="product-accordion__body">{{ product.description }}</div>
                  </div>
                </details>
              {% endif %}

              {% if block.settings.show_specifications %}
                <details class="product-accordion__item">
                  <summary class="product-accordion__trigger">
                    <span class="product-accordion__title">{{ block.settings.specifications_label }}</span>
                    <span class="product-accordion__icon" aria-hidden="true">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path class="product-accordion__icon-h" d="M3 8H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path class="product-accordion__icon-v" d="M8 3V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                      </svg>
                    </span>
                  </summary>
                  <div class="product-accordion__content">
                    <div class="product-accordion__body">
                      {% if block.settings.specifications_content != blank %}
                        {{ block.settings.specifications_content }}
                      {% else %}
                        {% assign spec_meta = product.metafields.custom.specifications.value | default: product.metafields.custom.specifications %}
                        {% if spec_meta != blank %}
                          {{ spec_meta }}
                        {% else %}
                          <p>No specifications available.</p>
                        {% endif %}
                      {% endif %}
                    </div>
                  </div>
                </details>
              {% endif %}

              {% if block.settings.show_how_to_use %}
                <details class="product-accordion__item">
                  <summary class="product-accordion__trigger">
                    <span class="product-accordion__title">{{ block.settings.how_to_use_label }}</span>
                    <span class="product-accordion__icon" aria-hidden="true">
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path class="product-accordion__icon-h" d="M3 8H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path class="product-accordion__icon-v" d="M8 3V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                      </svg>
                    </span>
                  </summary>
                  <div class="product-accordion__content">
                    <div class="product-accordion__body">
                      {% if block.settings.how_to_use_content != blank %}
                        {{ block.settings.how_to_use_content }}
                      {% else %}
                        {% assign how_to_meta = product.metafields.custom.how_to_use.value | default: product.metafields.custom.how_to_use %}
                        {% if how_to_meta != blank %}
                          {{ how_to_meta }}
                        {% else %}
                          <p>No usage instructions available.</p>
                        {% endif %}
                      {% endif %}
                    </div>
                  </div>
                </details>
              {% endif %}
            </div>

          {% when 'selling_plan_selector' %}
            {% if product.selling_plan_groups.size > 0 %}
              <div class="product-selling-plans" {{ block.shopify_attributes }}>
                {% for group in product.selling_plan_groups %}
                  <div class="selling-plan-group">
                    <label class="selling-plan-label">{{ group.name }}</label>
                    <select class="selling-plan-select" id="selling-plan-select" data-group-id="{{ group.id }}">
                      <option value="">{{ 'product.one_time_purchase' | t | default: 'One-time purchase' }}</option>
                      {% for plan in group.selling_plans %}
                        <option value="{{ plan.id }}" {% if plan == current_variant.selected_selling_plan %}selected{% endif %}>
                          {{ plan.name }}
                        </option>
                      {% endfor %}
                    </select>
                  </div>
                {% endfor %}
              </div>
            {% endif %}

          {% when 'pickup_availability' %}
            <div class="product-pickup" id="product-pickup" {{ block.shopify_attributes }}>
              {% render 'pickup-availability', variant: current_variant %}
            </div>

          {% when 'add_to_cart' %}
            {%- form 'product', product, id: 'product-form', class: 'product-form' -%}
              <input type="hidden" name="id" id="product-variant-id" value="{{ current_variant.id }}">
              <input type="hidden" name="quantity" id="form-quantity" value="1">
              {% if product.selling_plan_groups.size > 0 %}
                <input type="hidden" name="selling_plan" id="selling-plan-input" value="">
              {% endif %}

              <button
                type="submit"
                class="add-to-cart-btn"
                {{ block.shopify_attributes }}
                style="
                  --btn-bg: {{ block.settings.button_color }};
                  --btn-text: {{ block.settings.button_text_color }};
                  --btn-padding: {{ block.settings.button_padding_desktop }}px;
                  --btn-font-size: {{ block.settings.button_font_size_desktop }}px;
                  --btn-radius: {{ block.settings.button_radius }}px;
                  --btn-width: {{ block.settings.button_width_desktop }}%;
                  --btn-padding-mobile: {{ block.settings.button_padding_mobile }}px;
                  --btn-font-size-mobile: {{ block.settings.button_font_size_mobile }}px;
                  --btn-width-mobile: {{ block.settings.button_width_mobile }}%;
                "
                {% unless current_variant.available %}disabled{% endunless %}
                id="add-to-cart-button"
              >
                {% if current_variant.available %}
                  <span class="btn-text" id="add-to-cart-text">{{ block.settings.button_text }}</span>
                  {% if block.settings.show_price %}
                    <span class="btn-price" id="add-to-cart-price">{{ current_variant.price | money }}</span>
                  {% endif %}
                {% else %}
                  <span class="btn-text" id="add-to-cart-text">{{ block.settings.sold_out_text }}</span>
                {% endif %}
              </button>

              {% if block.settings.show_buy_now %}
                <form action="/cart" method="post" id="buy-now-form" class="buy-now-form">
                  <input type="hidden" name="id" id="buy-now-variant-id" value="{{ current_variant.id }}">
                  <input type="hidden" name="quantity" value="1">
                  <button
                    type="submit"
                    class="buy-now-btn"
                    id="buy-now-button"
                    name="checkout"
                    style="
                      --buynow-bg: {{ block.settings.buy_now_color }};
                      --buynow-text: {{ block.settings.buy_now_text_color }};
                      --buynow-font-size: {{ block.settings.buy_now_font_size }}px;
                      --buynow-radius: {{ block.settings.button_radius }}px;
                      --buynow-width: {{ block.settings.button_width_desktop }}%;
                      --buynow-width-mobile: {{ block.settings.button_width_mobile }}%;
                    "
                    {% unless current_variant.available %}disabled{% endunless %}
                  >
                    {{ block.settings.buy_now_text }}
                  </button>
                </form>
              {% endif %}

              {% if block.settings.show_dynamic_checkout %}
                <div class="product-dynamic-checkout">
                  {{ form | payment_button }}
                </div>
              {% endif %}

              <div class="product-payment-terms">
                {{ form | payment_terms }}
              </div>
            {%- endform -%}

          {% when 'social_share' %}
            {% assign product_url = request.origin | append: product.url %}
            {% assign product_title_encoded = product.title | url_encode %}
            <div class="product-social-share" {{ block.shopify_attributes }}>
              {% if block.settings.share_label != blank %}
                <span class="product-social-share__label">{{ block.settings.share_label }}</span>
              {% endif %}
              <div class="product-social-share__links">
                {% if block.settings.show_facebook %}
                  <a
                    href="https://www.facebook.com/sharer/sharer.php?u={{ product_url | url_encode }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="product-social-share__link product-social-share__link--facebook"
                    aria-label="{{ 'product.share_facebook' | t }}"
                  >
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                  </a>
                {% endif %}
                {% if block.settings.show_x %}
                  <a
                    href="https://twitter.com/intent/tweet?url={{ product_url | url_encode }}&text={{ product_title_encoded }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="product-social-share__link product-social-share__link--x"
                    aria-label="{{ 'product.share_x' | t }}"
                  >
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                  </a>
                {% endif %}
                {% if block.settings.show_instagram %}
                  <a
                    href="https://www.instagram.com/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="product-social-share__link product-social-share__link--instagram"
                    aria-label="{{ 'product.share_instagram' | t }}"
                  >
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                  </a>
                {% endif %}
              </div>
            </div>

          {% when 'custom_liquid' %}
            <div class="product-custom-liquid" {{ block.shopify_attributes }}>
              {{ block.settings.custom_liquid }}
            </div>

          {% when '@app' %}
            <div class="product-app-block" {{ block.shopify_attributes }}>
              {% render block %}
            </div>

        {% endcase %}
      {% endfor %}

      {%- comment -%} Gift card recipient form {%- endcomment -%}
      {% if product.gift_card? %}
        <div class="gift-card-recipient-form">
          <h3 class="gift-card-recipient__heading">{{ 'product.gift_card_recipient' | t | default: 'Send as a gift' }}</h3>
          <div class="gift-card-recipient__fields">
            <div class="gift-card-field">
              <label for="gift-card-recipient-email">{{ 'product.recipient_email' | t | default: 'Recipient email' }}</label>
              <input type="email" id="gift-card-recipient-email" name="properties[Recipient email]" placeholder="{{ 'product.recipient_email_placeholder' | t | default: 'email@example.com' }}">
            </div>
            <div class="gift-card-field">
              <label for="gift-card-recipient-name">{{ 'product.recipient_name' | t | default: 'Recipient name' }}</label>
              <input type="text" id="gift-card-recipient-name" name="properties[Recipient name]" placeholder="{{ 'product.recipient_name_placeholder' | t | default: 'Name' }}">
            </div>
            <div class="gift-card-field">
              <label for="gift-card-recipient-message">{{ 'product.recipient_message' | t | default: 'Message' }}</label>
              <textarea id="gift-card-recipient-message" name="properties[Message]" rows="3" placeholder="{{ 'product.recipient_message_placeholder' | t | default: 'Write a personal message' }}"></textarea>
            </div>
            <div class="gift-card-field">
              <label for="gift-card-recipient-send-on">{{ 'product.send_on' | t | default: 'Send on' }}</label>
              <input type="date" id="gift-card-recipient-send-on" name="properties[Send on]">
            </div>
          </div>
        </div>
      {% endif %}

    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var productData = {{ product | json }};
  var currentVariant = {{ current_variant | json }};
  var variantIdInput = document.getElementById('product-variant-id');
  var mainImage = document.getElementById('main-product-image');
  var thumbnails = document.querySelectorAll('.product-thumbnail');
  var addToCartBtn = document.getElementById('add-to-cart-button');
  var addToCartText = document.getElementById('add-to-cart-text');
  var addToCartPrice = document.getElementById('add-to-cart-price');
  var priceEl = document.getElementById('product-price');
  var compareEl = document.getElementById('product-compare-price');
  var saleBadge = document.getElementById('product-sale-badge');
  var unitPriceEl = document.getElementById('product-unit-price');
  var formQuantity = document.getElementById('form-quantity');

  // Build variant map from options
  var variantMap = {};
  productData.variants.forEach(function(v) {
    variantMap[v.id] = v;
  });

  // Selling plan select
  var sellingPlanSelect = document.getElementById('selling-plan-select');
  var sellingPlanInput = document.getElementById('selling-plan-input');
  if (sellingPlanSelect && sellingPlanInput) {
    sellingPlanSelect.addEventListener('change', function() {
      sellingPlanInput.value = this.value;
    });
  }

  // Variant selection
  var optionInputs = document.querySelectorAll('.variant-option-values input[type="radio"]');
  optionInputs.forEach(function(input) {
    input.addEventListener('change', function() {
      // Update visual selection
      var group = this.closest('.variant-option-values');
      group.querySelectorAll('.variant-option-value').forEach(function(el) {
        el.classList.remove('selected');
      });
      this.closest('.variant-option-value').classList.add('selected');

      // Get selected options
      var selectedOptions = [];
      document.querySelectorAll('.variant-option-group').forEach(function(g) {
        var checked = g.querySelector('input[type="radio"]:checked');
        if (checked) selectedOptions.push(checked.value);
      });

      // Find matching variant
      var matchedVariant = null;
      productData.variants.forEach(function(v) {
        var match = true;
        for (var i = 0; i < selectedOptions.length; i++) {
          if (v.options[i] !== selectedOptions[i]) {
            match = false;
            break;
          }
        }
        if (match) matchedVariant = v;
      });

      if (matchedVariant) {
        updateVariant(matchedVariant);
      }
    });
  });

  // Dropdown variant selection
  var optionDropdowns = document.querySelectorAll('.variant-option-dropdown');
  optionDropdowns.forEach(function(select) {
    select.addEventListener('change', function() {
      var selectedOptions = [];
      document.querySelectorAll('.variant-option-group').forEach(function(g) {
        var dropdown = g.querySelector('.variant-option-dropdown');
        var radio = g.querySelector('input[type="radio"]:checked');
        if (dropdown) selectedOptions.push(dropdown.value);
        else if (radio) selectedOptions.push(radio.value);
      });
      var matchedVariant = null;
      productData.variants.forEach(function(v) {
        var match = true;
        for (var i = 0; i < selectedOptions.length; i++) {
          if (v.options[i] !== selectedOptions[i]) { match = false; break; }
        }
        if (match) matchedVariant = v;
      });
      if (matchedVariant) updateVariant(matchedVariant);
    });
  });

  function formatMoney(cents) {
    return Shopify.formatMoney ? Shopify.formatMoney(cents) : (cents / 100).toFixed(2);
  }

  function updateVariant(variant) {
    currentVariant = variant;

    // Update hidden input
    if (variantIdInput) variantIdInput.value = variant.id;

    // Update URL
    var url = new URL(window.location.href);
    url.searchParams.set('variant', variant.id);
    window.history.replaceState({}, '', url.toString());

    // Update price
    if (priceEl) priceEl.textContent = formatMoney(variant.price);

    // Update compare at price
    if (compareEl) {
      if (variant.compare_at_price && variant.compare_at_price > variant.price) {
        compareEl.textContent = formatMoney(variant.compare_at_price);
        compareEl.style.display = '';
        if (saleBadge) {
          var savings = variant.compare_at_price - variant.price;
          var pct = Math.round((savings / variant.compare_at_price) * 100);
          saleBadge.textContent = 'Save ' + pct + '%';
          saleBadge.style.display = '';
        }
      } else {
        compareEl.style.display = 'none';
        if (saleBadge) saleBadge.style.display = 'none';
      }
    }

    // Update unit price
    if (unitPriceEl) {
      if (variant.unit_price_measurement) {
        var refVal = variant.unit_price_measurement.reference_value !== 1 ? variant.unit_price_measurement.reference_value : '';
        unitPriceEl.innerHTML = '<span>' + formatMoney(variant.unit_price) + '</span><span>/</span>' +
          (refVal ? '<span>' + refVal + '</span>' : '') +
          '<span>' + variant.unit_price_measurement.reference_unit + '</span>';
        unitPriceEl.style.display = '';
      } else {
        unitPriceEl.style.display = 'none';
      }
    }

    // Update add to cart
    if (addToCartBtn) {
      if (variant.available) {
        addToCartBtn.disabled = false;
        if (addToCartText) addToCartText.textContent = '{{ section.blocks | map: "settings" | where: "button_text" | first | default: "Add to cart" }}' || 'Add to cart';
        if (addToCartPrice) addToCartPrice.textContent = formatMoney(variant.price);
      } else {
        addToCartBtn.disabled = true;
        if (addToCartText) addToCartText.textContent = '{{ section.blocks | map: "settings" | where: "sold_out_text" | first | default: "Sold out" }}' || 'Sold out';
        if (addToCartPrice) addToCartPrice.style.display = 'none';
      }
    }

    // Update variant image
    if (variant.featured_image && mainImage) {
      // Find matching thumbnail by media id
      var matchThumb = null;
      if (variant.featured_media_id) {
        matchThumb = document.querySelector('.product-thumbnail[data-media-id="' + variant.featured_media_id + '"]');
      }
      // Fallback: match by image src containing the same filename
      if (!matchThumb && variant.featured_image.src) {
        var imgFilename = variant.featured_image.src.split('?')[0].split('/').pop();
        thumbnails.forEach(function(t) {
          var thumbUrl = t.dataset.imageUrl || '';
          if (thumbUrl && thumbUrl.indexOf(imgFilename) !== -1) {
            matchThumb = t;
          }
        });
      }
      // Use the thumbnail's sized URL if available, otherwise use variant image src
      if (matchThumb && matchThumb.dataset.imageUrl) {
        mainImage.src = matchThumb.dataset.imageUrl;
      } else {
        // Append width param for consistent sizing
        var imgSrc = variant.featured_image.src;
        if (imgSrc.indexOf('width=') === -1) {
          imgSrc += (imgSrc.indexOf('?') !== -1 ? '&' : '?') + 'width=800';
        }
        mainImage.src = imgSrc;
      }
      // Activate matching thumbnail
      thumbnails.forEach(function(t) { t.classList.remove('active'); });
      if (matchThumb) matchThumb.classList.add('active');
    }

    // Update buy now button
    var buyNowBtn = document.getElementById('buy-now-button');
    if (buyNowBtn) {
      buyNowBtn.disabled = !variant.available;
    }

    // Update buy now hidden input
    var buyNowVariantInput = document.getElementById('buy-now-variant-id');
    if (buyNowVariantInput) buyNowVariantInput.value = variant.id;

    // Dispatch event for other sections
    document.dispatchEvent(new CustomEvent('variant:changed', { detail: { variant: variant } }));
  }

  // Thumbnail click
  thumbnails.forEach(function(thumb) {
    thumb.addEventListener('click', function() {
      var type = this.dataset.mediaType;
      if (type === 'image' && mainImage) {
        var newImageUrl = this.dataset.imageUrl;
        if (newImageUrl) mainImage.src = newImageUrl;
      }
      thumbnails.forEach(function(t) { t.classList.remove('active'); });
      this.classList.add('active');
    });
  });

  // Thumbnail slider navigation
  var thumbContainer = document.getElementById('product-thumbnails');
  var prevBtn = document.querySelector('.thumb-prev');
  var nextBtn = document.querySelector('.thumb-next');

  if (thumbContainer && prevBtn && nextBtn) {
    prevBtn.addEventListener('click', function() {
      thumbContainer.scrollBy({ left: -100, behavior: 'smooth' });
    });
    nextBtn.addEventListener('click', function() {
      thumbContainer.scrollBy({ left: 100, behavior: 'smooth' });
    });
  }

  // Tab functionality
  var tabBtns = document.querySelectorAll('.tab-btn');
  var tabContents = document.querySelectorAll('.tab-content');

  tabBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      var targetTab = this.dataset.tab;
      tabBtns.forEach(function(b) { b.classList.remove('active'); });
      tabContents.forEach(function(c) { c.classList.remove('active'); });
      this.classList.add('active');
      var tabEl = document.getElementById('tab-' + targetTab);
      if (tabEl) tabEl.classList.add('active');
    });
  });

  // Quantity selector
  var quantityInput = document.getElementById('product-quantity');
  var minusBtn = document.querySelector('.quantity-minus');
  var plusBtn = document.querySelector('.quantity-plus');

  if (quantityInput && minusBtn && plusBtn) {
    var min = parseInt(quantityInput.min) || 1;
    var max = parseInt(quantityInput.max) || 99;

    minusBtn.addEventListener('click', function() {
      var value = parseInt(quantityInput.value);
      if (value > min) {
        quantityInput.value = value - 1;
        if (formQuantity) formQuantity.value = value - 1;
        updateBtnState();
      }
    });

    plusBtn.addEventListener('click', function() {
      var value = parseInt(quantityInput.value);
      if (value < max) {
        quantityInput.value = value + 1;
        if (formQuantity) formQuantity.value = value + 1;
        updateBtnState();
      }
    });

    function updateBtnState() {
      var value = parseInt(quantityInput.value);
      minusBtn.disabled = value <= min;
      plusBtn.disabled = value >= max;
    }
    updateBtnState();
  }

  // Accordion - close siblings
  document.querySelectorAll('.product-accordion__item').forEach(function(item) {
    item.addEventListener('toggle', function() {
      if (this.open) {
        var parent = this.closest('.product-accordion');
        parent.querySelectorAll('.product-accordion__item').forEach(function(sibling) {
          if (sibling !== item && sibling.open) {
            sibling.open = false;
          }
        });
      }
    });
  });
});
</script>

<style>
.product-section {
  padding: 40px 20px;
  max-width: 1440px;
  margin: 50px auto;
}

.product-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 60px;
  align-items: start;
  max-width: 1440px;
  margin: 0 auto;
}

/* Gallery */
.product-gallery {
  position: sticky;
  top: 20px;
  max-width: 400px;
  width: 100%;
  align-self: start;
}

.product-main-image {
  background: #fef7f7;
  border-radius: 20px;
  overflow: hidden;
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 20px;
}

.product-main-image img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  transition: transform 0.3s ease;
}

.product-main-image:hover img {
  transform: scale(1.05);
}

.product-media-video,
.product-media-model {
  width: 100%;
  height: 100%;
}

.product-media-video video,
.product-media-video iframe,
.product-media-model model-viewer {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Thumbnails */
.product-thumbnails-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.product-thumbnails {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: none;
  flex: 1;
  min-width: 0;
  padding: 5px;
}

.product-thumbnails::-webkit-scrollbar { display: none; }

.product-thumbnail {
  flex: 0 0 80px;
  width: 80px;
  height: 80px;
  border-radius: 12px;
  overflow: hidden;
  border: 2px solid transparent;
  background: #fef7f7;
  cursor: pointer;
  transition: all 0.3s ease;
  padding: 0;
  position: relative;
}

.product-thumbnail:hover,
.product-thumbnail.active {
  border-color: var(--thumb-active, #4A90D9);
}

.product-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.thumb-video-badge {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 20px;
  height: 20px;
  background: rgba(0,0,0,0.6);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
}

.thumb-nav {
  width: 20px;
  height: 20px;
  padding: 12px;
  box-sizing: content-box;
  border-radius: 50%;
  border: 1px solid #eee;
  background: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.3s ease;
  color: #666;
}

.thumb-nav:hover {
  border-color: #4A90D9;
  color: #4A90D9;
}

/* Product Info */
.product-info {
  padding: 20px 0;
}

.product-vendor {
  margin-bottom: 8px;
}

.product-vendor a {
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #888;
  text-decoration: none;
}

.product-vendor a:hover {
  color: #4A90D9;
}

.product-title {
  font-size: 26px;
  font-weight: 500;
  color: #1a1a2e;
  margin: 0 0 20px 0;
  line-height: 1.3;
}

/* Description block */
.product-description {
  font-size: 15px;
  line-height: 1.7;
  color: #555;
  margin-bottom: 24px;
}

/* Variant Selector */
.product-variants {
  margin-bottom: 24px;
}

.variant-option-group {
  margin-bottom: 16px;
}

.variant-option-label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #1a1a2e;
  margin-bottom: 10px;
}

/* Dropdown style */
.variant-option-dropdown {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid #ddd;
  border-radius: var(--vs-btn-radius, 8px);
  font-size: 14px;
  color: #333;
  background: white;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2.5'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
  padding-right: 36px;
}
.variant-option-dropdown:focus {
  outline: none;
  border-color: var(--vs-btn-selected-bg, #1a1a2e);
}

/* Button style */
.variant-option-values {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.variant-option-value {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 18px;
  border: 1px solid #ddd;
  border-radius: var(--vs-btn-radius, 8px);
  cursor: pointer;
  font-size: 14px;
  color: #333;
  transition: all 0.2s ease;
  background: white;
  min-width: 44px;
  min-height: 44px;
}

.variant-option-value:hover {
  border-color: #999;
}

.variant-option-value.selected {
  border-color: var(--vs-btn-selected-bg, #1a1a2e);
  background: var(--vs-btn-selected-bg, #1a1a2e);
  color: var(--vs-btn-selected-text, #fff);
}

/* Swatch style */
.variant-option-value.is-swatch {
  padding: 4px;
  border-radius: var(--vs-swatch-radius, 50%);
  width: calc(var(--vs-swatch-size, 32px) + 12px);
  height: calc(var(--vs-swatch-size, 32px) + 12px);
}

.variant-option-value.is-swatch.selected {
  background: transparent;
  border-width: 2px;
  border-color: var(--vs-btn-selected-bg, #1a1a2e);
}

.swatch-preview {
  display: block;
  width: var(--vs-swatch-size, 32px);
  height: var(--vs-swatch-size, 32px);
  border-radius: var(--vs-swatch-radius, 50%);
  border: 1px solid rgba(0,0,0,0.1);
}

.swatch-image {
  background-size: cover;
  background-position: center;
}

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  border: 0;
}

/* Features */
.feature-item {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: whitesmoke;
  border-radius: 30px;
  font-size: 14px;
  color: #1a1a2e;
  border: none;
  margin: 0 8px 8px 0;
}

.feature-icon { font-size: 16px; }
.feature-text { font-weight: 500; }

/* Price */
.product-price-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 30px;
  flex-wrap: wrap;
}

.product-price {
  font-size: 24px;
  font-weight: 600;
  color: #1a1a2e;
}

.product-compare-price {
  font-size: 20px;
  color: #999;
  text-decoration: line-through;
}

.product-sale-badge {
  padding: 6px 14px;
  background: linear-gradient(135deg, #4A90D9, #ff6b9d);
  color: white;
  font-size: 14px;
  font-weight: 600;
  border-radius: 20px;
}

.product-unit-price {
  width: 100%;
  font-size: 13px;
  color: #777;
}

.product-tax-note {
  width: 100%;
  font-size: 13px;
  color: #777;
  margin-top: 4px;
}

/* Selling plans */
.product-selling-plans {
  margin-bottom: 24px;
}

.selling-plan-label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #1a1a2e;
  margin-bottom: 8px;
}

.selling-plan-select {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  color: #333;
  background: white;
}

/* Pickup */
.product-pickup {
  margin-bottom: 16px;
}

/* Tabs */
.product-tabs {
  margin-bottom: 30px;
}

.product-tabs-nav {
  display: flex;
  gap: 8px;
  border-bottom: 2px solid var(--tab-bg, #f0f0f0);
}

.tab-btn {
  padding: 14px 24px;
  background: transparent;
  border: none;
  font-size: 15px;
  font-weight: 500;
  color: var(--tab-text, #666);
  cursor: pointer;
  position: relative;
  transition: all 0.3s ease;
}

.tab-btn::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--tab-active, #4A90D9);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.tab-btn:hover,
.tab-btn.active { color: var(--tab-active, #4A90D9); }
.tab-btn.active::after { transform: scaleX(1); }

.product-tabs-content {
  background: var(--tab-content-bg, whitesmoke);
  border-radius: 0 0 16px 16px;
}

.tab-content {
  display: none;
  padding: 24px;
}

.tab-content.active { display: block; }

.tab-content-inner {
  font-size: 15px;
  line-height: 1.7;
  color: var(--tab-content-text, #444);
}

.meta-heading {
  font-size: 18px;
  font-weight: 600;
  color: #1a1a2e;
  margin: 0 0 12px 0;
}

.meta-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.meta-list li {
  position: relative;
  padding-left: 24px;
  margin-bottom: 10px;
}

.meta-list li::before {
  content: '';
  position: absolute;
  left: 0;
  top: 8px;
  width: 8px;
  height: 8px;
  background: linear-gradient(135deg, #4A90D9, #ff6b9d);
  border-radius: 50%;
}

.no-content {
  color: #999;
  font-style: italic;
}

/* Quantity */
.product-quantity-wrapper {
  margin-bottom: 24px;
}

.quantity-label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #1a1a2e;
  margin-bottom: 12px;
}

.quantity-selector {
  display: flex;
  align-items: center;
  background: #f8f8f8;
  border-radius: 50px;
  padding: 4px;
  width: var(--qty-width, 40%);
  justify-content: space-between;
}

.quantity-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: var(--qty-btn-bg, white);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  font-size: 14px;
}

.quantity-btn i {
  font-size: 14px;
  color: var(--qty-btn-color, #1a1a2e);
}

.quantity-btn:hover:not(:disabled) {
  background: var(--qty-btn-hover, #4A90D9);
}

.quantity-btn:hover:not(:disabled) i {
  color: white;
}

.quantity-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.quantity-input {
  width: 50px;
  text-align: center;
  font-size: 16px;
  font-weight: 600;
  border: none;
  background: transparent;
  color: var(--qty-text-color, #1a1a2e);
  -moz-appearance: textfield;
}

.quantity-input::-webkit-outer-spin-button,
.quantity-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
}

/* Add to Cart & Dynamic Checkout */
.product-form {
  margin-top: 20px;
}

.add-to-cart-btn {
  width: var(--btn-width, 100%);
  padding: var(--btn-padding, 8px) 16px;
  background: var(--btn-bg, linear-gradient(135deg, #4A90D9, #ff6b9d));
  border: none;
  border-radius: var(--btn-radius, 50px);
  color: var(--btn-text, white);
  font-size: var(--btn-font-size, 16px);
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  transition: all 0.3s ease;
}

.add-to-cart-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  opacity: 0.9;
}

.add-to-cart-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
  opacity: 0.7;
}

.btn-price::before {
  content: '\2022';
  margin-right: 10px;
}

/* Buy Now Button */
.buy-now-form { margin-top: 10px; }
.buy-now-btn {
  width: var(--buynow-width, 100%);
  padding: var(--btn-padding, 8px) 16px;
  background: var(--buynow-bg, #1a1a1a);
  border: none;
  border-radius: var(--buynow-radius, 50px);
  color: var(--buynow-text, #fff);
  font-size: var(--buynow-font-size, 14px);
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.3s ease;
}

.buy-now-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  opacity: 0.9;
}

.buy-now-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
  opacity: 0.7;
}

/* Social Share */
.product-social-share {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.08);
}

.product-social-share__label {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-foreground, #1a1a1a);
  opacity: 0.6;
  white-space: nowrap;
}

.product-social-share__links {
  display: flex;
  align-items: center;
  gap: 8px;
}

.product-social-share__link {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  border-radius: 50%;
  color: var(--color-foreground, #1a1a1a);
  background: var(--color-secondary, rgba(0, 0, 0, 0.04));
  text-decoration: none;
  transition: background 0.25s ease, color 0.25s ease, transform 0.25s ease;
}

.product-social-share__link:hover {
  transform: translateY(-2px);
}

.product-social-share__link--facebook:hover {
  background: #1877F2;
  color: #fff;
}

.product-social-share__link--x:hover {
  background: #000;
  color: #fff;
}

.product-social-share__link--instagram:hover {
  background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
  color: #fff;
}

.product-dynamic-checkout {
  margin-top: 12px;
}

.product-dynamic-checkout .shopify-payment-button {
  margin: 0;
}

.product-payment-terms {
  margin-top: 12px;
}

/* Gift card recipient form */
.gift-card-recipient-form {
  margin-top: 24px;
  padding: 20px;
  background: #f9f9f9;
  border-radius: 12px;
}

.gift-card-recipient__heading {
  font-size: 16px;
  font-weight: 600;
  color: #1a1a2e;
  margin: 0 0 16px;
}

.gift-card-recipient__fields {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.gift-card-field label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: #555;
  margin-bottom: 4px;
}

.gift-card-field input,
.gift-card-field textarea {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
}

.gift-card-field textarea {
  resize: vertical;
}

/* Custom liquid */
.product-custom-liquid {
  margin: 16px 0;
}

/* Responsive */
@media (max-width: 1024px) {
  .product-container { gap: 40px; }
  .product-title { font-size: 28px; }
  .product-price { font-size: 30px; }
}

@media (max-width: 768px) {
  .product-container {
    grid-template-columns: 1fr;
    gap: 30px;
  }
  .product-gallery {
    position: static;
    align-self: auto;
  }
  .product-title { font-size: 24px; }
  .product-price { font-size: 28px; }
  .feature-item { padding: 8px 14px; font-size: 13px; }
  .product-thumbnail { flex: 0 0 70px; width: 70px; height: 70px; }

  .product-tabs-nav {
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
    -webkit-overflow-scrolling: touch;
  }
  .product-tabs-nav::-webkit-scrollbar { display: none; }
  .tab-btn {
    padding: 12px 16px;
    font-size: 14px;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .tab-content {
    padding: 16px;
  }

  .add-to-cart-btn {
    width: var(--btn-width-mobile, 100%);
    padding: var(--btn-padding-mobile, 12px) 20px;
    font-size: var(--btn-font-size-mobile, 14px);
  }

  .quantity-btn {
    width: 36px;
    height: 36px;
  }

  .quantity-btn i {
    font-size: 12px;
  }
}

@media (max-width: 480px) {
  .product-section { padding: 20px 15px; }
  .product-main-image { border-radius: 16px; }

  .tab-btn { padding: 10px 14px; font-size: 13px; }
  .tab-content { padding: 14px; }
  .tab-content-inner { font-size: 14px; }

  .quantity-selector { width: var(--qty-width-mobile, auto); }
  .quantity-input { flex: 1; }

  .add-to-cart-btn {
    width: var(--btn-width-mobile, 50%);
    padding: var(--btn-padding-mobile, 12px) 16px;
    font-size: var(--btn-font-size-mobile, 14px);
  }
}

/* Product Accordion */
.product-accordion {
  margin: 24px 0;
  border-top: 1px solid #e0e0e0;
}

.product-accordion__item {
  border-bottom: 1px solid #e0e0e0;
}

.product-accordion__trigger {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 20px 0;
  cursor: pointer;
  list-style: none;
  user-select: none;
}

.product-accordion__trigger::-webkit-details-marker {
  display: none;
}

.product-accordion__title {
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #1a1a2e;
}

.product-accordion__icon {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #1a1a2e;
  transition: transform 0.3s ease;
}

.product-accordion__icon-v {
  transition: opacity 0.25s ease, transform 0.25s ease;
  transform-origin: center;
}

.product-accordion__item[open] .product-accordion__icon-v {
  opacity: 0;
  transform: rotate(90deg);
}

.product-accordion__content {
  overflow: hidden;
}

.product-accordion__body {
  padding: 0 0 20px;
  font-size: 14px;
  line-height: 1.7;
  color: #555;
}

.product-accordion__body p {
  margin: 0 0 12px;
}

.product-accordion__body p:last-child {
  margin-bottom: 0;
}

.product-accordion__body ul,
.product-accordion__body ol {
  padding-left: 20px;
  margin: 0 0 12px;
}

.product-accordion__body li {
  margin-bottom: 6px;
}
</style>

{% schema %}
{
  "name": "Product page",
  "tag": "section",
  "class": "product-page-section",
  "settings": [
    {
      "type": "color",
      "id": "thumbnail_active_color",
      "label": "Thumbnail active border color",
      "default": "#4A90D9"
    }
  ],
  "blocks": [
    {
      "type": "vendor",
      "name": "Vendor",
      "limit": 1,
      "settings": []
    },
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": []
    },
    {
      "type": "price",
      "name": "Price",
      "limit": 1,
      "settings": []
    },
    {
      "type": "description",
      "name": "Description",
      "limit": 1,
      "settings": []
    },
    {
      "type": "variant_selector",
      "name": "Variant picker",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_style",
          "label": "Style",
          "options": [
            { "value": "buttons", "label": "Buttons" },
            { "value": "dropdown", "label": "Dropdown" }
          ],
          "default": "buttons"
        },
        {
          "type": "header",
          "content": "Swatches"
        },
        {
          "type": "paragraph",
          "content": "Swatches are small visual indicators that display the colors, patterns, and materials in which a product is available to customers. To apply swatches, set the style to 'Buttons'"
        },
        {
          "type": "select",
          "id": "swatch_style",
          "label": "Style",
          "options": [
            { "value": "variant_image", "label": "Variant image" },
            { "value": "color", "label": "Color" },
            { "value": "none", "label": "None" }
          ],
          "default": "variant_image"
        },
        {
          "type": "select",
          "id": "swatch_shape",
          "label": "Swatch shape",
          "options": [
            { "value": "circle", "label": "Circle" },
            { "value": "square", "label": "Square" }
          ],
          "default": "circle"
        },
        {
          "type": "range",
          "id": "swatch_size",
          "label": "Size",
          "min": 20,
          "max": 60,
          "step": 2,
          "default": 32,
          "unit": "px"
        },
        {
          "type": "header",
          "content": "Button settings"
        },
        {
          "type": "select",
          "id": "button_shape",
          "label": "Button shape",
          "options": [
            { "value": "normal", "label": "Normal" },
            { "value": "pill", "label": "Pill" },
            { "value": "square", "label": "Square" }
          ],
          "default": "normal"
        },
        {
          "type": "color",
          "id": "button_selected_bg",
          "label": "Selected button color",
          "default": "#1a1a2e"
        },
        {
          "type": "color",
          "id": "button_selected_text",
          "label": "Selected button text color",
          "default": "#ffffff"
        }
      ]
    },
    {
      "type": "selling_plan_selector",
      "name": "Selling plan selector",
      "limit": 1,
      "settings": []
    },
    {
      "type": "feature_icon",
      "name": "Feature icon",
      "settings": [
        {
          "type": "text",
          "id": "feature_icon",
          "label": "Icon (emoji)",
          "default": ""
        },
        {
          "type": "text",
          "id": "feature_text",
          "label": "Text",
          "default": "Free Shipping"
        }
      ]
    },
    {
      "type": "tabs",
      "name": "Product tabs",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Tab settings"
        },
        {
          "type": "checkbox",
          "id": "show_description",
          "label": "Show description tab",
          "default": true
        },
        {
          "type": "text",
          "id": "description_label",
          "label": "Description tab label",
          "default": "Description"
        },
        {
          "type": "checkbox",
          "id": "show_benefits",
          "label": "Show benefits tab",
          "default": true
        },
        {
          "type": "text",
          "id": "benefits_label",
          "label": "Benefits tab label",
          "default": "Benefits"
        },
        {
          "type": "richtext",
          "id": "benefits_content",
          "label": "Content (or uses metafield custom.benefits)"
        },
        {
          "type": "checkbox",
          "id": "show_ingredients",
          "label": "Show ingredients tab",
          "default": true
        },
        {
          "type": "text",
          "id": "ingredients_label",
          "label": "Ingredients tab label",
          "default": "Ingredients"
        },
        {
          "type": "richtext",
          "id": "ingredients_content",
          "label": "Content (or uses metafield custom.ingredients)"
        },
        {
          "type": "header",
          "content": "Tab colors"
        },
        {
          "type": "color",
          "id": "tab_background_color",
          "label": "Tab nav border color",
          "default": "#f0f0f0"
        },
        {
          "type": "color",
          "id": "tab_text_color",
          "label": "Tab text color",
          "default": "#666666"
        },
        {
          "type": "color",
          "id": "tab_active_color",
          "label": "Active tab color",
          "default": "#4A90D9"
        },
        {
          "type": "color",
          "id": "content_background_color",
          "label": "Content background",
          "default": "#f5f5f5"
        },
        {
          "type": "color",
          "id": "content_text_color",
          "label": "Content text color",
          "default": "#444444"
        }
      ]
    },
    {
      "type": "product_accordion",
      "name": "Product accordion",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Description"
        },
        {
          "type": "checkbox",
          "id": "show_description",
          "label": "Show description",
          "default": true
        },
        {
          "type": "text",
          "id": "description_label",
          "label": "Label",
          "default": "Details"
        },
        {
          "type": "header",
          "content": "Specifications"
        },
        {
          "type": "checkbox",
          "id": "show_specifications",
          "label": "Show specifications",
          "default": true
        },
        {
          "type": "text",
          "id": "specifications_label",
          "label": "Label",
          "default": "Specifications"
        },
        {
          "type": "richtext",
          "id": "specifications_content",
          "label": "Content (or uses metafield custom.specifications)"
        },
        {
          "type": "header",
          "content": "How to use"
        },
        {
          "type": "checkbox",
          "id": "show_how_to_use",
          "label": "Show how to use",
          "default": true
        },
        {
          "type": "text",
          "id": "how_to_use_label",
          "label": "Label",
          "default": "How to use"
        },
        {
          "type": "richtext",
          "id": "how_to_use_content",
          "label": "Content (or uses metafield custom.how_to_use)"
        }
      ]
    },
    {
      "type": "quantity",
      "name": "Quantity selector",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Quantity"
        },
        {
          "type": "header",
          "content": "Colors"
        },
        {
          "type": "color",
          "id": "button_background",
          "label": "Button background",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "button_icon_color",
          "label": "Button icon color",
          "default": "#1a1a2e"
        },
        {
          "type": "color",
          "id": "button_hover_color",
          "label": "Button hover color",
          "default": "#4A90D9"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Quantity text color",
          "default": "#1a1a2e"
        },
        {
          "type": "header",
          "content": "Size"
        },
        {
          "type": "range",
          "id": "width_desktop",
          "label": "Width (desktop)",
          "min": 20,
          "max": 100,
          "step": 5,
          "default": 40,
          "unit": "%"
        },
        {
          "type": "range",
          "id": "width_mobile",
          "label": "Width (mobile)",
          "min": 20,
          "max": 100,
          "step": 5,
          "default": 50,
          "unit": "%"
        }
      ]
    },
    {
      "type": "pickup_availability",
      "name": "Pickup availability",
      "limit": 1,
      "settings": []
    },
    {
      "type": "add_to_cart",
      "name": "Add to cart button",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Button text"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text",
          "default": "Add to cart"
        },
        {
          "type": "text",
          "id": "sold_out_text",
          "label": "Sold out text",
          "default": "Sold out"
        },
        {
          "type": "checkbox",
          "id": "show_price",
          "label": "Show price in button",
          "default": true
        },
        {
          "type": "header",
          "content": "Desktop styling"
        },
        {
          "type": "color",
          "id": "button_color",
          "label": "Button color",
          "default": "#4A90D9"
        },
        {
          "type": "color",
          "id": "button_text_color",
          "label": "Text color",
          "default": "#ffffff"
        },
        {
          "type": "range",
          "id": "button_padding_desktop",
          "label": "Button padding (desktop)",
          "min": 8,
          "max": 30,
          "step": 2,
          "default": 14,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "button_font_size_desktop",
          "label": "Font size (desktop)",
          "min": 12,
          "max": 24,
          "step": 1,
          "default": 14,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "button_radius",
          "label": "Border radius",
          "min": 0,
          "max": 50,
          "step": 2,
          "default": 50,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "button_width_desktop",
          "label": "Button width (desktop)",
          "min": 30,
          "max": 100,
          "step": 5,
          "default": 50,
          "unit": "%"
        },
        {
          "type": "header",
          "content": "Mobile styling"
        },
        {
          "type": "range",
          "id": "button_padding_mobile",
          "label": "Button padding (mobile)",
          "min": 6,
          "max": 24,
          "step": 2,
          "default": 12,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "button_font_size_mobile",
          "label": "Font size (mobile)",
          "min": 10,
          "max": 20,
          "step": 1,
          "default": 14,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "button_width_mobile",
          "label": "Button width (mobile)",
          "min": 50,
          "max": 100,
          "step": 5,
          "default": 100,
          "unit": "%"
        },
        {
          "type": "header",
          "content": "Buy now button"
        },
        {
          "type": "checkbox",
          "id": "show_buy_now",
          "label": "Show buy now button",
          "default": false
        },
        {
          "type": "text",
          "id": "buy_now_text",
          "label": "Button text",
          "default": "Buy it now"
        },
        {
          "type": "color",
          "id": "buy_now_color",
          "label": "Button color",
          "default": "#1a1a1a"
        },
        {
          "type": "color",
          "id": "buy_now_text_color",
          "label": "Text color",
          "default": "#ffffff"
        },
        {
          "type": "range",
          "id": "buy_now_font_size",
          "label": "Font size",
          "min": 12,
          "max": 22,
          "step": 1,
          "default": 14,
          "unit": "px"
        },
        {
          "type": "header",
          "content": "Dynamic checkout"
        },
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "label": "Show dynamic checkout button",
          "default": false
        }
      ]
    },
    {
      "type": "social_share",
      "name": "Social share",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "Label",
          "default": "Share"
        },
        {
          "type": "checkbox",
          "id": "show_facebook",
          "label": "Show Facebook",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_x",
          "label": "Show X (Twitter)",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_instagram",
          "label": "Show Instagram",
          "default": true
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "Custom Liquid",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "Custom Liquid"
        }
      ]
    },
    {
      "type": "@app"
    }
  ],
  "presets": [
    {
      "name": "Product page",
      "blocks": [
        { "type": "vendor" },
        { "type": "title" },
        { "type": "price" },
        { "type": "variant_selector" },
        { "type": "quantity" },
        { "type": "add_to_cart" },
        { "type": "social_share" }
      ]
    }
  ]
}
{% endschema %}

{% assign article_url = request.origin | append: article.url %}
{% assign article_title_encoded = article.title | url_encode %}

{% if section.settings.show_breadcrumbs %}
  {% render 'breadcrumbs', breadcrumb_type: 'article' %}
{% else %}
  <div class="article-page__nav">
    <a href="{{ blog.url }}" class="article-page__back">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      {{ 'blog.back_to_blog' | t }}
    </a>
  </div>
{% endif %}
<article class="article-page">

  {% if section.settings.show_featured_image %}
    <div class="article-page__hero">
      {% if article.image %}
        {{ article.image | image_url: width: 1600 | image_tag: class: 'article-page__hero-img', loading: 'eager', alt: article.image.alt | default: article.title, widths: '375, 750, 1100, 1600', sizes: '(max-width: 768px) 100vw, 1200px' }}
      {% else %}
        {{ 'lifestyle-1' | placeholder_svg_tag: 'article-page__hero-img article-page__placeholder' }}
      {% endif %}
    </div>
  {% endif %}

  <div class="article-page__container">
    <header class="article-page__header">
      {% if section.settings.show_tags and article.tags.size > 0 %}
        <div class="article-page__tags">
          {% for tag in article.tags %}
            <a href="{{ blog.url }}/tagged/{{ tag | handle }}" class="article-page__tag">{{ tag }}</a>
          {% endfor %}
        </div>
      {% endif %}

      <h1 class="article-page__title">{{ article.title }}</h1>

      {% if section.settings.show_author or section.settings.show_date %}
        <div class="article-page__meta">
          {% assign date = article.published_at | time_tag: format: 'date' %}
          {{ 'blog.article_metadata_html' | t: date: date, author: article.author }}
        </div>
      {% endif %}
    </header>

    <div class="article-page__content rte">
      {{ article.content }}
    </div>

    {% if section.settings.show_share_links %}
      <div class="article-page__share">
        <span class="article-page__share-label">{{ 'blog.share' | t }}</span>
        <div class="article-page__share-links">
          <a
            href="https://twitter.com/intent/tweet?url={{ article_url | url_encode }}&text={{ article_title_encoded }}"
            target="_blank"
            rel="noopener noreferrer"
            class="article-page__share-link"
            aria-label="{{ 'blog.share_twitter' | t }}"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
            {{ 'blog.share_twitter' | t }}
          </a>
          <a
            href="https://www.facebook.com/sharer/sharer.php?u={{ article_url | url_encode }}"
            target="_blank"
            rel="noopener noreferrer"
            class="article-page__share-link"
            aria-label="{{ 'blog.share_facebook' | t }}"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            {{ 'blog.share_facebook' | t }}
          </a>
          <a
            href="https://pinterest.com/pin/create/button/?url={{ article_url | url_encode }}&description={{ article_title_encoded }}"
            target="_blank"
            rel="noopener noreferrer"
            class="article-page__share-link"
            aria-label="{{ 'blog.share_pinterest' | t }}"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738a.36.36 0 01.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12.017 24c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641 0 12.017 0z"/></svg>
            {{ 'blog.share_pinterest' | t }}
          </a>
        </div>
      </div>
    {% endif %}

    {% if section.settings.show_author %}
      <div class="article-page__author-box">
        <div class="article-page__author-avatar">
          {{ article.author | slice: 0 }}
        </div>
        <div class="article-page__author-info">
          <span class="article-page__author-label">{{ 'blog.written_by' | t }}</span>
          <span class="article-page__author-name">{{ article.author }}</span>
        </div>
      </div>
    {% endif %}

    <nav class="article-page__pagination">
      {% if blog.previous_article %}
        <a href="{{ blog.previous_article }}" class="article-page__pagination-link article-page__pagination-link--prev">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span>{{ 'blog.previous_post' | t }}</span>
        </a>
      {% else %}
        <span></span>
      {% endif %}
      {% if blog.next_article %}
        <a href="{{ blog.next_article }}" class="article-page__pagination-link article-page__pagination-link--next">
          <span>{{ 'blog.next_post' | t }}</span>
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </a>
      {% else %}
        <span></span>
      {% endif %}
    </nav>

    {% if blog.comments_enabled? and section.settings.show_comments %}
      <section class="article-page__comments" id="comments">
        <h2 class="article-page__comments-heading">{{ 'blog.article_comments' | t }}</h2>

        {% paginate article.comments by 10 %}
          {% if article.comments_count > 0 %}
            <p class="article-page__comments-count">{{ 'blog.comments_count' | t: count: article.comments_count }}</p>
            <div class="article-page__comments-list">
              {% for comment in article.comments %}
                <div class="article-page__comment">
                  <div class="article-page__comment-avatar">
                    {{ comment.author | slice: 0 }}
                  </div>
                  <div class="article-page__comment-body">
                    <div class="article-page__comment-header">
                      <span class="article-page__comment-author">{{ comment.author }}</span>
                      <span class="article-page__comment-date">{{ comment.created_at | time_tag: format: 'date' }}</span>
                    </div>
                    <div class="article-page__comment-content">{{ comment.content }}</div>
                  </div>
                </div>
              {% endfor %}
            </div>

            {% if paginate.pages > 1 %}
              <div class="article-page__comments-pagination">
                {{ paginate | default_pagination: anchor: 'comments' }}
              </div>
            {% endif %}
          {% else %}
            <p class="article-page__no-comments">{{ 'blog.no_comments' | t }}</p>
          {% endif %}
        {% endpaginate %}

        {% form 'new_comment', article %}
          <div class="article-page__comment-form">
            <h3 class="article-page__comment-form-title">{{ 'blog.comment_form_title' | t }}</h3>

            {{ form.errors | default_errors }}

            <div class="article-page__form-row">
              <div class="article-page__form-group">
                <label for="comment-author" class="article-page__form-label">{{ 'blog.comment_form_name' | t }}</label>
                <input
                  type="text"
                  name="comment[author]"
                  id="comment-author"
                  class="article-page__form-input"
                  value="{{ form.author }}"
                  required
                >
              </div>
              <div class="article-page__form-group">
                <label for="comment-email" class="article-page__form-label">{{ 'blog.comment_form_email' | t }}</label>
                <input
                  type="email"
                  name="comment[email]"
                  id="comment-email"
                  class="article-page__form-input"
                  value="{{ form.email }}"
                  required
                >
              </div>
            </div>

            <div class="article-page__form-group">
              <label for="comment-body" class="article-page__form-label">{{ 'blog.comment_form_body' | t }}</label>
              <textarea
                name="comment[body]"
                id="comment-body"
                class="article-page__form-textarea"
                rows="5"
                required
              >{{ form.body }}</textarea>
            </div>

            <button type="submit" class="article-page__form-submit">
              {{ 'blog.comment_form_submit' | t }}
            </button>
          </div>
        {% endform %}
      </section>
    {% endif %}
  </div>
</article>

{% stylesheet %}
  .article-page {
    font-family: var(--font-primary--family);
    color: var(--color-foreground);
    background-color: var(--color-background);
  }

  .article-page__nav {
    max-width: var(--page-width);
    margin: 0 auto;
    padding: 24px var(--page-margin);
  }

  .article-page__back {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    color: var(--color-foreground);
    text-decoration: none;
    opacity: 0.7;
    transition: opacity 0.2s;
  }

  .article-page__back:hover {
    opacity: 1;
  }

  .article-page__hero {
    width: 100%;
    max-height: 560px;
    overflow: hidden;
    margin-bottom: 48px;
  }

  .article-page__hero-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .article-page__container {
    max-width: 760px;
    margin: 0 auto;
    padding: 0 var(--page-margin) 80px;
  }

  .article-page__header {
    margin-bottom: 48px;
    text-align: center;
  }

  .article-page__tags {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    margin-bottom: 20px;
  }

  .article-page__tag {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--color-primary);
    text-decoration: none;
    padding: 4px 12px;
    border: 1px solid var(--color-primary);
    border-radius: 20px;
    transition: background-color 0.2s, color 0.2s;
  }

  .article-page__tag:hover {
    background-color: var(--color-primary);
    color: var(--color-button-label);
  }

  .article-page__title {
    font-size: 42px;
    font-weight: 700;
    line-height: 1.15;
    letter-spacing: -0.02em;
    margin: 0 0 20px;
    color: var(--color-foreground);
  }

  .article-page__meta {
    font-size: 15px;
    color: var(--color-foreground);
    opacity: 0.6;
  }

  .article-page__content.rte {
    font-size: 17px;
    line-height: 1.8;
    color: var(--color-foreground);
  }

  .article-page__content.rte h2 {
    font-size: 28px;
    font-weight: 700;
    margin: 48px 0 16px;
    line-height: 1.3;
  }

  .article-page__content.rte h3 {
    font-size: 22px;
    font-weight: 600;
    margin: 40px 0 12px;
    line-height: 1.3;
  }

  .article-page__content.rte p {
    margin: 0 0 24px;
  }

  .article-page__content.rte img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 32px 0;
    display: block;
  }

  .article-page__content.rte blockquote {
    margin: 32px 0;
    padding: 24px 32px;
    border-left: 4px solid var(--color-primary);
    background-color: var(--color-secondary);
    border-radius: 0 8px 8px 0;
    font-size: 18px;
    font-style: italic;
    line-height: 1.7;
  }

  .article-page__content.rte blockquote p:last-child {
    margin-bottom: 0;
  }

  .article-page__content.rte ul,
  .article-page__content.rte ol {
    margin: 0 0 24px;
    padding-left: 24px;
  }

  .article-page__content.rte li {
    margin-bottom: 8px;
  }

  .article-page__content.rte a {
    color: var(--color-primary);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .article-page__content.rte pre {
    background-color: var(--color-secondary);
    padding: 24px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 32px 0;
    font-size: 14px;
    line-height: 1.6;
  }

  .article-page__content.rte table {
    width: 100%;
    border-collapse: collapse;
    margin: 32px 0;
  }

  .article-page__content.rte th,
  .article-page__content.rte td {
    padding: 12px 16px;
    border-bottom: 1px solid var(--color-secondary);
    text-align: left;
  }

  .article-page__content.rte th {
    font-weight: 600;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .article-page__share {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 48px;
    padding-top: 32px;
    border-top: 1px solid var(--color-secondary);
  }

  .article-page__share-label {
    font-size: 14px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--color-foreground);
    opacity: 0.6;
  }

  .article-page__share-links {
    display: flex;
    gap: 12px;
  }

  .article-page__share-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: var(--color-foreground);
    text-decoration: none;
    padding: 8px 14px;
    border: 1px solid var(--color-secondary);
    border-radius: 6px;
    transition: border-color 0.2s, background-color 0.2s;
  }

  .article-page__share-link:hover {
    border-color: var(--color-primary);
    background-color: var(--color-secondary);
  }

  .article-page__author-box {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-top: 40px;
    padding: 32px;
    background-color: var(--color-secondary);
    border-radius: 12px;
  }

  .article-page__author-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background-color: var(--color-primary);
    color: var(--color-button-label);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    font-weight: 700;
    flex-shrink: 0;
    text-transform: uppercase;
  }

  .article-page__author-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .article-page__author-label {
    font-size: 13px;
    color: var(--color-foreground);
    opacity: 0.5;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .article-page__author-name {
    font-size: 18px;
    font-weight: 600;
  }

  .article-page__pagination {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 48px;
    padding-top: 32px;
    border-top: 1px solid var(--color-secondary);
  }

  .article-page__pagination-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 15px;
    font-weight: 500;
    color: var(--color-foreground);
    text-decoration: none;
    transition: color 0.2s;
  }

  .article-page__pagination-link:hover {
    color: var(--color-primary);
  }

  .article-page__comments {
    margin-top: 64px;
    padding-top: 48px;
    border-top: 1px solid var(--color-secondary);
  }

  .article-page__comments-heading {
    font-size: 28px;
    font-weight: 700;
    margin: 0 0 8px;
  }

  .article-page__comments-count {
    font-size: 14px;
    color: var(--color-foreground);
    opacity: 0.6;
    margin: 0 0 32px;
  }

  .article-page__no-comments {
    font-size: 15px;
    color: var(--color-foreground);
    opacity: 0.5;
    font-style: italic;
    margin: 0 0 40px;
  }

  .article-page__comments-list {
    display: flex;
    flex-direction: column;
    gap: 24px;
    margin-bottom: 40px;
  }

  .article-page__comment {
    display: flex;
    gap: 16px;
    padding: 24px;
    background-color: var(--color-secondary);
    border-radius: 12px;
  }

  .article-page__comment-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--color-primary);
    color: var(--color-button-label);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: 700;
    flex-shrink: 0;
    text-transform: uppercase;
  }

  .article-page__comment-body {
    flex: 1;
    min-width: 0;
  }

  .article-page__comment-header {
    display: flex;
    align-items: baseline;
    gap: 12px;
    margin-bottom: 8px;
  }

  .article-page__comment-author {
    font-size: 15px;
    font-weight: 600;
  }

  .article-page__comment-date {
    font-size: 13px;
    color: var(--color-foreground);
    opacity: 0.5;
  }

  .article-page__comment-content {
    font-size: 15px;
    line-height: 1.6;
  }

  .article-page__comments-pagination {
    margin-bottom: 40px;
    text-align: center;
  }

  .article-page__comment-form {
    padding: 32px;
    background-color: var(--color-secondary);
    border-radius: 12px;
  }

  .article-page__comment-form-title {
    font-size: 20px;
    font-weight: 600;
    margin: 0 0 24px;
  }

  .article-page__form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }

  .article-page__form-group {
    margin-bottom: 16px;
  }

  .article-page__form-row .article-page__form-group {
    margin-bottom: 0;
  }

  .article-page__form-label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 6px;
    color: var(--color-foreground);
    opacity: 0.7;
  }

  .article-page__form-input,
  .article-page__form-textarea {
    width: 100%;
    padding: 12px 16px;
    font-size: 15px;
    font-family: var(--font-primary--family);
    color: var(--color-foreground);
    background-color: var(--color-background);
    border: 1px solid var(--color-secondary);
    border-radius: var(--style-border-radius-inputs, 6px);
    transition: border-color 0.2s;
    box-sizing: border-box;
  }

  .article-page__form-input:focus,
  .article-page__form-textarea:focus {
    outline: none;
    border-color: var(--color-primary);
  }

  .article-page__form-textarea {
    resize: vertical;
    min-height: 120px;
  }

  .article-page__form-submit {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 32px;
    font-size: 14px;
    font-weight: 600;
    font-family: var(--font-primary--family);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--color-button-label);
    background-color: var(--color-button);
    border: none;
    border-radius: var(--style-border-radius-inputs, 6px);
    cursor: pointer;
    transition: opacity 0.2s;
    margin-top: 8px;
  }

  .article-page__form-submit:hover {
    opacity: 0.85;
  }

  @media (max-width: 768px) {
    .article-page__hero {
      max-height: 360px;
      margin-bottom: 32px;
    }

    .article-page__container {
      padding: 0 20px 60px;
    }

    .article-page__title {
      font-size: 28px;
    }

    .article-page__header {
      margin-bottom: 32px;
    }

    .article-page__content.rte {
      font-size: 16px;
    }

    .article-page__content.rte h2 {
      font-size: 22px;
      margin: 32px 0 12px;
    }

    .article-page__content.rte h3 {
      font-size: 19px;
      margin: 28px 0 10px;
    }

    .article-page__content.rte blockquote {
      padding: 16px 20px;
      margin: 24px 0;
    }

    .article-page__share {
      flex-direction: column;
      align-items: flex-start;
      gap: 12px;
    }

    .article-page__share-links {
      flex-wrap: wrap;
    }

    .article-page__share-link svg + span,
    .article-page__share-link span {
      display: none;
    }

    .article-page__author-box {
      padding: 24px;
    }

    .article-page__form-row {
      grid-template-columns: 1fr;
    }

    .article-page__comment {
      padding: 16px;
    }

    .article-page__comment-form {
      padding: 20px;
    }

    .article-page__pagination {
      flex-direction: column;
      gap: 16px;
      align-items: flex-start;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.article",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_breadcrumbs",
      "label": "Show breadcrumbs",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_featured_image",
      "label": "Show featured image",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_author",
      "label": "Show author",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show date",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_tags",
      "label": "Show tags",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_share_links",
      "label": "Show share links",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_comments",
      "label": "Show comments",
      "default": true
    }
  ]
}
{% endschema %}
